---

-----------------------PUNTO 1
CREATE TABLESPACE MID_TERM DATAFILE 
'MID_TERM.dbf' SIZE 50M
AUTOEXTEND ON NEXT 1000K MAXSIZE 2048M
EXTENT MANAGEMENT LOCAL 
SEGMENT SPACE MANAGEMENT AUTO
ONLINE;

-------------------------------------------------------
-----------------PUNTO 2
CREATE USER USERP1 IDENTIFIED BY USERP1
DEFAULT TABLESPACE MID_TERM
TEMPORARY TABLESPACE TEMP
QUOTA UNLIMITED ON MID_TERM;

------------PUNTO 3
GRANT DBA TO USERP1;
GRANT CONNECT, RESOURCE TO USERP1;

----------PUNTO 4
     COMUNAS_SEQ SHOULD START IN 50 WITH INCREMENTS OF 3;
	 COLEGIOS_SEQ SHOULD START IN 100 WITH INCREMENTS OF 1;
     
create sequence COMUNAS_SEQ
  start with 50
  increment by 3
  maxvalue 999999
  minvalue 50;

 create sequence COLEGIOS_SEQ 
  start with 100
  increment by 1
  maxvalue 999999
  minvalue 100;
     
    
-------- PUNTO 5
CREATE TABLE COMUNAS (
	ID INTEGER PRIMARY KEY,
	NOMBRE VARCHAR2(255)
 )


create table colegios (
    ID INTEGER NOT NULL,
    consecutivo_dane VARCHAR2(255),
	nombre_sede VARCHAR2(255),
	tipo_sede VARCHAR2(255),
	comuna_id INTEGER,
	prestacion_servicio VARCHAR2(255),
	zona VARCHAR2(255),
	barrio VARCHAR2(255),
	sector VARCHAR2(255),
	direccion_sede VARCHAR2(255),
	telefono_sede VARCHAR2(255),
	rector VARCHAR2(255),
	contador_prejardin_jardin INTEGER,
	contador_transicion INTEGER,
	contador_primaria INTEGER,
	contador_secundaria INTEGER,
	contador_media INTEGER,
	contador_adultos INTEGER,
	jornada_completa VARCHAR(8),
	jornada_manana VARCHAR(8),
	jornada_tarde VARCHAR(8),
	jornada_nocturna VARCHAR(8),
	jornada_fin_de_semana VARCHAR(8),
	jornada_unica VARCHAR(8),
	clasificacion_icfes VARCHAR(8),  
    CONSTRAINT colegios_PK PRIMARY KEY (ID)
)

ALTER TABLE colegios ADD CONSTRAINT COMUNA_FK FOREIGN KEY(comuna_id) REFERENCES comunas(id);

--DROP TABLE COMUNAS;
--DROP TABLE colegios;

INSERT INTO COMUNAS VALUES (1,	'POPULAR');
INSERT INTO COMUNAS VALUES (10,	'LA CANDELARIA');
INSERT INTO COMUNAS VALUES (11,	'LAURELES ESTADIO');
INSERT INTO COMUNAS VALUES (12,	'LA AMERICA');
INSERT INTO COMUNAS VALUES (13,	'SAN JAVIER');
INSERT INTO COMUNAS VALUES (14,	'POBLADO');
INSERT INTO COMUNAS VALUES (15,	'GUAYABAL');
INSERT INTO COMUNAS VALUES (16,	'BELÉN');
INSERT INTO COMUNAS VALUES (2,	'SANTA CRUZ');
INSERT INTO COMUNAS VALUES (3,	'MANRIQUE');
INSERT INTO COMUNAS VALUES (4,	'ARANJUEZ');
INSERT INTO COMUNAS VALUES (5,	'CASTILLA');
INSERT INTO COMUNAS VALUES (50,	'PALMITAS');
INSERT INTO COMUNAS VALUES (6,	'DOCE DE OCTUBRE');
INSERT INTO COMUNAS VALUES (60,	'SAN CRISTOBAL');
INSERT INTO COMUNAS VALUES (7,	'ROBLEDO');
INSERT INTO COMUNAS VALUES (70,	'ALTAVISTA');
INSERT INTO COMUNAS VALUES (8,	'VILLA HERMOSA');
INSERT INTO COMUNAS VALUES (80,	'SAN ANTONIO DE PRADO');
INSERT INTO COMUNAS VALUES (9,	'BUENOS AIRES');
INSERT INTO COMUNAS VALUES (90,	'SANTA ELENA');

---------------------------------------------------------------------------------

-----queries--
--1
select barrio, count(colegios) as numero_colegios
from colegios 
where barrio ='buenos aires'
order by numero_colegios desc;